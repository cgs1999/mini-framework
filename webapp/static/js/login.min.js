$.namespace("Mo.Login"),Mo.Login={init:function(){this.initEvent()},initEvent:function(){$(".arrow-down",".item-setting-language").bind("click",function(){$(".item-language-list").show()}),$(document).bind("click",function(i){var e=$(i.target);0==e.closest(".arrow-down").length&&0==e.closest(".item-language-list").length&&($(".item-language-list").hide(),$(".setting-language").removeClass("select"))}),$(".setting-language",".ul-language-list").bind("click",function(){var i=$(this).attr("vId");$(".current-language").text($(this).attr("value")),$.ajax({type:"post",url:Mo.Base.getAppUrl()+"/changeLocale",data:{locale:i},dataType:"json",success:function(i){i.success||alert(i.description),location.href=Mo.Base.getAppUrl()+"/login"},error:function(){location.href=Mo.Base.getAppUrl()+"/login"}})}).mouseover(function(){$(this).hasClass("select")||($(".setting-language").removeClass("select"),$(this).addClass("select"))}),$(".forgot-password").bind("click",function(){Mo.Login.showForgotPassword()}),$(".W_close","#forgotPassword-wrapper").bind("click",function(){Mo.Login.showLogin()}),$("#account").keydown(function(i){if(13==i.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-account");e.hide()}).blur(function(){var i=$(".reg-label",".item-account"),e=$("#account").val();""==$.trim(e)&&(i.show(),$("#account").val(""))}),$("#password").keydown(function(i){if(13==i.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-password");e.hide()}).blur(function(){var i=$(".reg-label",".item-password"),e=$("#password").val();""==e&&(i.show(),$("#password").val(""))}),$("#verifyCode").keydown(function(i){if(13==i.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-verifyCode");e.hide()}).blur(function(){var i=$(".reg-label",".item-verifyCode"),e=$("#verifyCode").val();""==$.trim(e)&&(i.show(),$("#verifyCode").val(""))}),$("#loginBtn").bind("click",function(){if(Mo.Base.throttle.isLock("/login"))return!1;Mo.Base.throttle.lock("/login"),Mo.Login.hideLoginMsg();var i=Mo.Login.checkData();return i&&null!=i?($.ajax({type:"post",url:Mo.Base.getAppUrl()+"/login",data:i,dataType:"json",success:function(i){i.success?location.href=Mo.Base.getAppUrl()+"/home":(Mo.Login.showLoginMsg(i.description),$("#verifyImage").click(),Mo.Login.showVerifyCode()),Mo.Base.throttle.unLock("/login")},error:function(){$("#verifyImage").click(),Mo.Login.showVerifyCode(),Mo.Login.showLoginMsg($lang.login_login_msg_ajax_error),Mo.Base.throttle.unLock("/login")}}),void 0):(Mo.Base.throttle.unLock("/login"),!1)}),$("#verifyImage").bind("click",function(){document.getElementById("verifyImage").src=Mo.Base.getAppUrl()+"/adminVerifyImage?random="+(new Date).getTime()}),$("#reg-email").keydown(function(){var i=$(".reg-label",".item-reg-email");i.hide()}).blur(function(){var i=$(".reg-label",".item-reg-email"),e=$("#reg-email").val();""==$.trim(e)&&(i.show(),$("#reg-email").val(""))}),$("#forgotPasswordBtn").bind("click",function(){var i=$("#reg-email").val();return""==$.trim(i)?(Mo.Login.showForgotPasswordMsg($lang.login_forgot_msg_regEmail_empty),!1):void 0})},checkData:function(){var i={account:$("#account").val(),password:$("#password").val(),verifyCode:$("#verifyCode").val()};if(""==$.trim(i.account))return Mo.Login.showLoginMsg($lang.login_login_msg_account_empty),$("#account").focus(),!1;if(""==$.trim(i.password))return Mo.Login.showLoginMsg($lang.login_login_msg_password_empty),$("#password").focus(),!1;if($(".item-verifyCode").hasClass("hidden"))i.enableVerifyCode="0";else if(i.enableVerifyCode="1",""==$.trim(i.verifyCode))return Mo.Login.showLoginMsg($lang.login_login_msg_verifyCode_empty),$("#verifyCode").focus(),!1;return i},showLogin:function(){$("#login-wrapper").show(),$("#account").focus(),$("#forgotPassword-wrapper").hide(),$("#reg-email").val(""),$(".reg-label",".item-reg-email").show(),Mo.Login.hideForgotPasswordMsg()},showForgotPassword:function(){$("#login-wrapper").hide(),$("#forgotPassword-wrapper").show(),$("#reg-email").focus(),$("#account").val(""),$(".reg-label",".item-account").show(),$("#password").val(""),$(".reg-label",".item-password").show(),$("#verifyCode").val(""),$(".reg-label",".item-verifyCode").show(),Mo.Login.hideLoginMsg()},showLoginMsg:function(i){$(".msg","#login-wrapper").text(i),$(".msg-div","#login-wrapper").show()},hideLoginMsg:function(){$(".msg-div","#login-wrapper").hide(),$(".msg","#login-wrapper").text("")},showForgotPasswordMsg:function(i){$(".msg","#forgotPassword-wrapper").text(i),$(".msg-div","#forgotPassword-wrapper").show()},hideForgotPasswordMsg:function(){$(".msg-div","#forgotPassword-wrapper").hide(),$(".msg","#forgotPassword-wrapper").text("")},showVerifyCode:function(){$(".item-verifyCode").hasClass("hidden")&&$(".item-verifyCode").removeClass("hidden")},hideVerifyCode:function(){if(!$(".item-verifyCode").hasClass("hidden")){$(".item-verifyCode").addClass("hidden"),$("#verifyCode").val("");var i=$(".reg-label",".item-verifyCode");i.hasClass("hidden")&&i.removeClass("hidden")}}};