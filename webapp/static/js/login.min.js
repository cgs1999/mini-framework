$.namespace("Mo.Login"),Mo.Login={init:function(){this.initEvent()},initEvent:function(){$(".arrow-down",".item-setting-language").bind("click",function(){$(".item-language-list").show()}),$(document).bind("click",function(o){var e=$(o.target);0==e.closest(".arrow-down").length&&0==e.closest(".item-language-list").length&&($(".item-language-list").hide(),$(".setting-language").removeClass("select"))}),$(".setting-language",".ul-language-list").bind("click",function(){var o=$(this).attr("vId");$(".current-language").text($(this).attr("value")),$.ajax({type:"post",url:Mo.Base.getAppUrl()+"/changeLocale",data:{locale:o},dataType:"json",success:function(o){o.success||alert(o.description),location.href=Mo.Base.getAppUrl()+"/login"},error:function(){location.href=Mo.Base.getAppUrl()+"/login"}})}).mouseover(function(){$(this).hasClass("select")||($(".setting-language").removeClass("select"),$(this).addClass("select"))}),$(".forgot-password").bind("click",function(){Mo.Login.showForgotPassword()}),$(".W_close","#forgotPassword-wrapper").bind("click",function(){Mo.Login.showLogin()}),$("#account").keydown(function(o){if(13==o.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-account");e.hide()}).blur(function(){var o=$(".reg-label",".item-account"),e=$("#account").val();""==$.trim(e)&&(o.show(),$("#account").val(""))}),$("#password").keydown(function(o){if(13==o.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-password");e.hide()}).blur(function(){var o=$(".reg-label",".item-password"),e=$("#password").val();""==e&&(o.show(),$("#password").val(""))}),$("#verifyCode").keydown(function(o){if(13==o.keyCode)return $("#loginBtn").click(),!1;var e=$(".reg-label",".item-verifyCode");e.hide()}).blur(function(){var o=$(".reg-label",".item-verifyCode"),e=$("#verifyCode").val();""==$.trim(e)&&(o.show(),$("#verifyCode").val(""))}),$("#loginBtn").bind("click",function(){if(Mo.Base.throttle.isLock("/login"))return!1;Mo.Base.throttle.lock("/login"),Mo.Login.hideLoginMsg();var o=Mo.Login.checkData();return o&&null!=o?($.ajax({type:"post",url:Mo.Base.getAppUrl()+"/login",data:o,dataType:"json",success:function(o){o.success?location.href=Mo.Base.getAppUrl()+"/home":(Mo.Login.showLoginMsg(o.description),$("#verifyImage").click(),Mo.Login.showVerifyCode()),Mo.Base.throttle.unLock("/login")},error:function(){$("#verifyImage").click(),Mo.Login.showVerifyCode(),Mo.Login.showLoginMsg($lang.login_login_msg_ajax_error),Mo.Base.throttle.unLock("/login")}}),void 0):(Mo.Base.throttle.unLock("/login"),!1)}),$("#verifyImage").bind("click",function(){document.getElementById("verifyImage").src=Mo.Base.getAppUrl()+"/verifyCodeImage?random="+(new Date).getTime()}),$("#reg-email").keydown(function(){var o=$(".reg-label",".item-reg-email");o.hide()}).blur(function(){var o=$(".reg-label",".item-reg-email"),e=$("#reg-email").val();""==$.trim(e)&&(o.show(),$("#reg-email").val(""))}),$("#forgotPasswordBtn").bind("click",function(){var o=$("#reg-email").val();return""==$.trim(o)?(Mo.Login.showForgotPasswordMsg($lang.login_forgot_msg_regEmail_empty),!1):void 0})},checkData:function(){var o={account:$("#account").val(),password:$("#password").val(),verifyCode:$("#verifyCode").val()};if(""==$.trim(o.account))return Mo.Login.showLoginMsg($lang.login_login_msg_account_empty),$("#account").focus(),!1;if(""==$.trim(o.password))return Mo.Login.showLoginMsg($lang.login_login_msg_password_empty),$("#password").focus(),!1;if($(".item-verifyCode").hasClass("hidden"))o.enableVerifyCode="0";else if(o.enableVerifyCode="1",""==$.trim(o.verifyCode))return Mo.Login.showLoginMsg($lang.login_login_msg_verifyCode_empty),$("#verifyCode").focus(),!1;return o},showLogin:function(){$("#login-wrapper").show(),$("#account").focus(),$("#forgotPassword-wrapper").hide(),$("#reg-email").val(""),$(".reg-label",".item-reg-email").show(),Mo.Login.hideForgotPasswordMsg()},showForgotPassword:function(){$("#login-wrapper").hide(),$("#forgotPassword-wrapper").show(),$("#reg-email").focus(),$("#account").val(""),$(".reg-label",".item-account").show(),$("#password").val(""),$(".reg-label",".item-password").show(),$("#verifyCode").val(""),$(".reg-label",".item-verifyCode").show(),Mo.Login.hideLoginMsg()},showLoginMsg:function(o){$(".msg","#login-wrapper").text(o),$(".msg-div","#login-wrapper").show()},hideLoginMsg:function(){$(".msg-div","#login-wrapper").hide(),$(".msg","#login-wrapper").text("")},showForgotPasswordMsg:function(o){$(".msg","#forgotPassword-wrapper").text(o),$(".msg-div","#forgotPassword-wrapper").show()},hideForgotPasswordMsg:function(){$(".msg-div","#forgotPassword-wrapper").hide(),$(".msg","#forgotPassword-wrapper").text("")},showVerifyCode:function(){$(".item-verifyCode").hasClass("hidden")&&$(".item-verifyCode").removeClass("hidden")},hideVerifyCode:function(){if(!$(".item-verifyCode").hasClass("hidden")){$(".item-verifyCode").addClass("hidden"),$("#verifyCode").val("");var o=$(".reg-label",".item-verifyCode");o.hasClass("hidden")&&o.removeClass("hidden")}}};